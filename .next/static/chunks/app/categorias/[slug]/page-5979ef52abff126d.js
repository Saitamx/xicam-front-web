(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529,621],{1145:(e,t,s)=>{Promise.resolve().then(s.bind(s,1974))},1974:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(5155),a=s(2115),o=s(63),i=s(6900),c=s(3147),l=s(1171),n=s(8902),d=s(7621),m=s(5626),g=s(5740),u=s(7919),h=s(2619),x=s.n(h),p=s(5239);function y(){let e=(0,o.useParams)(),t=(0,o.useRouter)(),s=e.slug,[h,y]=(0,a.useState)(null),[f,b]=(0,a.useState)([]),[v,j]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let e=async()=>{try{let e=await d.Zx.getBySlug(s);y(e);let t=await d.ZN.getByCategory(e.id);b(t)}catch(e){console.error("Error fetching category:",e),t.push("/categorias")}finally{j(!1)}};s&&e()},[s,t]),v)?(0,r.jsx)(i.U,{children:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,r.jsx)(n.E,{children:"Cargando categor\xeda..."})]})})}):h?(0,r.jsx)(i.U,{children:(0,r.jsx)("div",{className:"bg-gradient-to-b from-gray-50 to-white py-6 sm:py-8",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 sm:px-6",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(x(),{href:"/categorias",children:(0,r.jsxs)(u.$,{variant:"ghost",size:"sm",className:"mb-4",children:[(0,r.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Volver a Categor\xedas"]})})}),(0,r.jsxs)("div",{className:"text-center mb-8 sm:mb-12",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center mb-4",children:h.image?(0,r.jsx)("div",{className:"relative w-20 h-20 sm:w-24 sm:h-24 rounded-2xl overflow-hidden shadow-soft",children:(0,r.jsx)(p.default,{src:h.image,alt:h.name,fill:!0,className:"object-cover"})}):(0,r.jsx)("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl flex items-center justify-center shadow-soft",children:(0,r.jsx)(g.A,{className:"w-10 h-10 sm:w-12 sm:h-12 text-white"})})}),(0,r.jsx)(l.D,{level:1,className:"mb-3 sm:mb-4",children:h.name}),h.description&&(0,r.jsx)(n.E,{className:"max-w-2xl mx-auto text-sm sm:text-base text-gray-600",children:h.description})]}),v?(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"bg-gray-200 rounded-2xl aspect-square mb-3"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},t))}):f.length>0?(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:f.map(e=>(0,r.jsx)(c.A,{product:e},e.id))}):(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)(n.E,{className:"text-gray-500",children:"No hay productos disponibles en esta categor\xeda."})})]})})}):(0,r.jsx)(i.U,{children:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(l.D,{level:2,children:"Categor\xeda no encontrada"}),(0,r.jsx)(x(),{href:"/categorias",children:(0,r.jsx)(u.$,{className:"mt-4",children:"Volver a Categor\xedas"})})]})})})}},3147:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(5155),a=s(2619),o=s.n(a),i=s(3405),c=s(952);let l=e=>{let t,{product:s}=e;return(0,r.jsx)(o(),{href:"/productos/".concat(s.slug),children:(0,r.jsxs)(i.Z,{className:"group overflow-hidden h-full flex flex-col border-2 border-transparent hover:border-primary-200 hover:shadow-xl transition-all duration-300",children:[(0,r.jsxs)("div",{className:"relative aspect-square bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden rounded-t-xl",children:[s.image?(0,r.jsx)("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"w-10 h-10 sm:w-12 sm:h-12 text-gray-400"})}),s.isFeatured&&(0,r.jsx)("div",{className:"absolute top-2 right-2 bg-gradient-to-r from-primary-600 to-primary-700 text-white text-xs font-semibold px-2.5 py-1 rounded-full shadow-md",children:"⭐ Destacado"}),s.canBeEmbroidered&&(0,r.jsx)("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-accent-500 to-accent-600 text-white text-xs font-semibold px-2.5 py-1 rounded-full shadow-md",children:"✨ Bordado"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),(0,r.jsxs)("div",{className:"p-3 sm:p-4 flex flex-col flex-grow",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm sm:text-base text-gray-900 mb-1 sm:mb-2 line-clamp-2 group-hover:text-primary-600 transition-colors",children:s.name}),s.description&&(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-2 sm:mb-3 line-clamp-2 flex-grow",children:s.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-auto pt-2 border-t border-gray-100",children:[(0,r.jsx)("span",{className:"text-base sm:text-lg font-bold text-primary-600",children:(t=s.price,new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0}).format(t))}),s.stock>0?(0,r.jsxs)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[s.stock," disponibles"]}):(0,r.jsx)("span",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded-full font-medium",children:"Sin stock"})]})]})]})})}},5626:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(5105).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5740:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(5105).A)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},7621:(e,t,s)=>{"use strict";s.d(t,{ZN:()=>i,Zx:()=>c,cN:()=>l,customersApi:()=>n});let r=s(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:3004";class a{async request(e,t,s){let r="".concat(this.baseUrl).concat(e),a=localStorage.getItem("customer_token");try{let e=await fetch(r,{...t,headers:{"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)},...s,...null==t?void 0:t.headers}});if(!e.ok){let t=await e.json().catch(()=>({message:"Error HTTP: ".concat(e.status," ").concat(e.statusText)})),s=t.message||t.error||"Error HTTP: ".concat(e.status);409===e.status?s=t.message||"Este email ya est\xe1 registrado. Por favor, inicia sesi\xf3n o usa otro email.":401===e.status?s=t.message||"Credenciales inv\xe1lidas. Verifica tu email y contrase\xf1a.":400===e.status?s=t.message||t.error||"Datos inv\xe1lidos. Por favor, verifica la informaci\xf3n ingresada.":404===e.status?s=t.message||"Recurso no encontrado.":e.status>=500&&(s="Error del servidor. Por favor, intenta m\xe1s tarde.");let r=Error(s);throw r.status=e.status,r.error=t,r}return e.json()}catch(e){if(e instanceof Error)throw e;throw Error("Error de red al conectar con el servidor")}}async get(e,t){return this.request(e,{method:"GET"},t)}async post(e,t,s){return this.request(e,{method:"POST",body:JSON.stringify(t)},s)}async patch(e,t){return this.request(e,{method:"PATCH",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e){this.baseUrl=e}}let o=new a(r),i={getAll:()=>o.get("/products?isActive=true"),getFeatured:()=>o.get("/products/featured"),getById:e=>o.get("/products/".concat(e)),getBySlug:e=>o.get("/products/slug/".concat(e)),getByCategory:e=>o.get("/products?categoryId=".concat(e,"&isActive=true"))},c={getAll:()=>o.get("/categories"),getById:e=>o.get("/categories/".concat(e)),getBySlug:e=>o.get("/categories/slug/".concat(e))},l={create:e=>o.post("/orders",e),getMyOrders:()=>{let e=localStorage.getItem("customer_token");return o.get("/orders/my-orders",e?{Authorization:"Bearer ".concat(e)}:{})},getById:e=>o.get("/orders/".concat(e)),getShippingTypes:()=>o.get("/orders/shipping/types"),initiateWebpay:e=>o.post("/orders/".concat(e,"/webpay/init")),confirmWebpay:e=>o.post("/orders/webpay/confirm",{token:e})},n={register:e=>o.post("/customers/register",e),login:e=>o.post("/customers/login",e),getProfile:()=>{let e=localStorage.getItem("customer_token");return o.get("/customers/me",e?{Authorization:"Bearer ".concat(e)}:{})}}}},e=>{e.O(0,[134,76,690,441,255,358],()=>e(e.s=1145)),_N_E=e.O()}]);