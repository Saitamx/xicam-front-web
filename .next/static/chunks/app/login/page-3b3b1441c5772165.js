(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520,621],{3527:(e,r,t)=>{Promise.resolve().then(t.bind(t,9593))},7621:(e,r,t)=>{"use strict";t.d(r,{ZN:()=>i,Zx:()=>n,cN:()=>c,customersApi:()=>l});let s=t(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:3004";class a{async request(e,r,t){let s="".concat(this.baseUrl).concat(e),a=localStorage.getItem("customer_token");try{let e=await fetch(s,{...r,headers:{"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)},...t,...null==r?void 0:r.headers}});if(!e.ok){let r=await e.json().catch(()=>({message:"Error HTTP: ".concat(e.status," ").concat(e.statusText)})),t=r.message||r.error||"Error HTTP: ".concat(e.status);409===e.status?t=r.message||"Este email ya est\xe1 registrado. Por favor, inicia sesi\xf3n o usa otro email.":401===e.status?t=r.message||"Credenciales inv\xe1lidas. Verifica tu email y contrase\xf1a.":400===e.status?t=r.message||r.error||"Datos inv\xe1lidos. Por favor, verifica la informaci\xf3n ingresada.":404===e.status?t=r.message||"Recurso no encontrado.":e.status>=500&&(t="Error del servidor. Por favor, intenta m\xe1s tarde.");let s=Error(t);throw s.status=e.status,s.error=r,s}return e.json()}catch(e){if(e instanceof Error)throw e;throw Error("Error de red al conectar con el servidor")}}async get(e,r){return this.request(e,{method:"GET"},r)}async post(e,r,t){return this.request(e,{method:"POST",body:JSON.stringify(r)},t)}async patch(e,r){return this.request(e,{method:"PATCH",body:JSON.stringify(r)})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e){this.baseUrl=e}}let o=new a(s),i={getAll:()=>o.get("/products?isActive=true"),getFeatured:()=>o.get("/products/featured"),getById:e=>o.get("/products/".concat(e)),getBySlug:e=>o.get("/products/slug/".concat(e)),getByCategory:e=>o.get("/products?categoryId=".concat(e,"&isActive=true"))},n={getAll:()=>o.get("/categories"),getById:e=>o.get("/categories/".concat(e)),getBySlug:e=>o.get("/categories/slug/".concat(e))},c={create:e=>o.post("/orders",e),getMyOrders:()=>{let e=localStorage.getItem("customer_token");return o.get("/orders/my-orders",e?{Authorization:"Bearer ".concat(e)}:{})},getById:e=>o.get("/orders/".concat(e)),getShippingTypes:()=>o.get("/orders/shipping/types"),initiateWebpay:e=>o.post("/orders/".concat(e,"/webpay/init")),confirmWebpay:e=>o.post("/orders/webpay/confirm",{token:e})},l={register:e=>o.post("/customers/register",e),login:e=>o.post("/customers/login",e),getProfile:()=>{let e=localStorage.getItem("customer_token");return o.get("/customers/me",e?{Authorization:"Bearer ".concat(e)}:{})}}},9593:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>v});var s=t(5155),a=t(2115),o=t(63),i=t(6900),n=t(1171),c=t(8902),l=t(7919),u=t(3405);let d=(0,t(5105).A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var m=t(3664),g=t(9708),h=t(2619),p=t.n(h),y=t(7621),x=t(5536),f=t(3779);function v(){let e=(0,o.useRouter)(),r=(0,x.h)(),{login:t}=(0,f.c)(),[h,v]=(0,a.useState)(!1),[w,b]=(0,a.useState)({email:"",password:""}),N=async s=>{if(s.preventDefault(),!w.email.trim())return void r.showError("Por favor, ingresa tu email");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.email))return void r.showError("Por favor, ingresa un email v\xe1lido");if(!w.password.trim())return void r.showError("Por favor, ingresa tu contrase\xf1a");v(!0);try{let{customer:s,token:a}=await y.customersApi.login({email:w.email,password:w.password});t(a,s),r.showSuccess("\uD83D\uDC4B \xa1Bienvenido de nuevo, ".concat(s.fullName,"!")),setTimeout(()=>{let r=new URLSearchParams(window.location.search).get("return");e.push(r||"/")},1e3)}catch(t){console.error("Error al iniciar sesi\xf3n:",t);let e="Error al iniciar sesi\xf3n. Por favor, intenta nuevamente.";401===t.status?e="❌ Email o contrase\xf1a incorrectos. Verifica tus credenciales e intenta nuevamente.":400===t.status?e="❌ Por favor, completa todos los campos correctamente.":t.message&&(e="❌ ".concat(t.message)),r.showError(e),v(!1)}};return(0,s.jsx)(i.U,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white py-12 sm:py-16",children:(0,s.jsx)("div",{className:"container mx-auto px-4 sm:px-6",children:(0,s.jsx)("div",{className:"max-w-md mx-auto",children:(0,s.jsxs)(u.Z,{className:"p-6 sm:p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-primary-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(d,{className:"w-8 h-8 text-primary-600"})}),(0,s.jsx)(n.D,{level:1,className:"mb-2",children:"Iniciar sesi\xf3n"}),(0,s.jsx)(c.E,{className:"text-gray-600 text-sm",children:"Accede a tu cuenta para continuar"})]}),(0,s.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 inline mr-1"}),"Email *"]}),(0,s.jsx)("input",{type:"email",id:"email",required:!0,value:w.email,onChange:e=>b({...w,email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"juan@example.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,s.jsx)(g.A,{className:"w-4 h-4 inline mr-1"}),"Contrase\xf1a *"]}),(0,s.jsx)("input",{type:"password",id:"password",required:!0,value:w.password,onChange:e=>b({...w,password:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Tu contrase\xf1a"})]}),(0,s.jsx)(l.$,{type:"submit",className:"w-full",disabled:h,children:h?"Iniciando sesi\xf3n...":"Iniciar sesi\xf3n"}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)(c.E,{className:"text-sm text-gray-600",children:["\xbfNo tienes una cuenta?"," ",(0,s.jsx)(p(),{href:"/register",className:"text-primary-600 hover:text-primary-700 font-semibold",children:"Reg\xedstrate aqu\xed"})]})})]})]})})})})})}},9708:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(5105).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}},e=>{e.O(0,[134,690,441,255,358],()=>e(e.s=3527)),_N_E=e.O()}]);