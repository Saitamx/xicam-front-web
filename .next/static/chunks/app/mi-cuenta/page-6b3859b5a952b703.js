(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[416,621],{55:(e,s,r)=>{Promise.resolve().then(r.bind(r,4017))},952:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(5105).A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},2472:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(5105).A)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},4017:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>P});var t=r(5155),a=r(2115),l=r(63),i=r(6900),n=r(1171),c=r(8902),d=r(7919),o=r(3405),m=r(508),x=r(4926),h=r(952),g=r(5105);let u=(0,g.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var p=r(2472),y=r(3664),b=r(9141),j=r(1873),f=r(6617);let v=(0,g.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var N=r(3779),w=r(7621),E=r(5536),A=r(2619),k=r.n(A);function P(){let e=(0,l.useRouter)(),{customer:s,isAuthenticated:r,isLoading:g,logout:A}=(0,N.c)(),P=(0,E.h)(),[C,S]=(0,a.useState)(!0),[T,D]=(0,a.useState)([]),[M,B]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!g){if(!r)return void e.push("/login?return=/mi-cuenta");s&&_()}},[r,g,s,e]);let _=async()=>{if(s)try{B(!0);let e=await w.cN.getMyOrders();D(e)}catch(e){console.error("Error fetching orders:",e),P.showError("Error al cargar tus \xf3rdenes")}finally{B(!1),S(!1)}},I=e=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0}).format(e);if(g||C||!r||!s)return(0,t.jsx)(i.U,{children:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-50 to-white",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,t.jsx)(c.E,{className:"text-gray-600",children:"Cargando tu cuenta..."})]})})});let L=T.reduce((e,s)=>e+s.total,0),Z=T.length;return(0,t.jsx)(i.U,{children:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 py-8 sm:py-16",children:(0,t.jsx)("div",{className:"container mx-auto px-4 sm:px-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"relative mb-8",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl opacity-10"}),(0,t.jsx)("div",{className:"relative bg-white rounded-2xl shadow-lg p-6 sm:p-8 border border-gray-100",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"relative w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center shadow-lg",children:(0,t.jsx)(m.A,{className:"w-8 h-8 sm:w-10 sm:h-10 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.D,{level:1,className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1",children:"Mi Cuenta"}),(0,t.jsxs)(c.E,{className:"text-gray-600 text-sm sm:text-base",children:["Bienvenido de vuelta, ",s.fullName.split(" ")[0]]})]})]}),(0,t.jsxs)(d.$,{variant:"outline",onClick:()=>{A(),P.showInfo("Sesi\xf3n cerrada exitosamente"),e.push("/")},className:"border-red-200 text-red-600 hover:bg-red-50 hover:border-red-300 transition-all",children:[(0,t.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Cerrar Sesi\xf3n"]})]})})]}),T.length>0&&(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[(0,t.jsx)(o.Z,{className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.E,{className:"text-sm text-blue-700 font-medium mb-1",children:"Total Pedidos"}),(0,t.jsx)(c.E,{className:"text-2xl font-bold text-blue-900",children:Z})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(h.A,{className:"w-6 h-6 text-blue-700"})})]})}),(0,t.jsx)(o.Z,{className:"p-4 bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.E,{className:"text-sm text-green-700 font-medium mb-1",children:"Total Gastado"}),(0,t.jsx)(c.E,{className:"text-2xl font-bold text-green-900",children:I(L)})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-green-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(u,{className:"w-6 h-6 text-green-700"})})]})}),(0,t.jsx)(o.Z,{className:"p-4 bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.E,{className:"text-sm text-purple-700 font-medium mb-1",children:"Miembro desde"}),(0,t.jsx)(c.E,{className:"text-lg font-bold text-purple-900",children:s.createdAt?new Date(s.createdAt).toLocaleDateString("es-CL",{month:"short",year:"numeric"}):"Reciente"})]}),(0,t.jsx)("div",{className:"w-12 h-12 bg-purple-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(p.A,{className:"w-6 h-6 text-purple-700"})})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)(o.Z,{className:"p-6 shadow-lg border-0 bg-white",children:[(0,t.jsxs)("div",{className:"text-center mb-6 pb-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"relative w-24 h-24 mx-auto mb-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full"}),(0,t.jsx)("div",{className:"absolute inset-2 bg-white rounded-full flex items-center justify-center",children:(0,t.jsx)(m.A,{className:"w-10 h-10 text-primary-600"})})]}),(0,t.jsx)(n.D,{level:2,className:"text-xl font-bold text-gray-900 mb-1",children:s.fullName}),(0,t.jsx)(c.E,{className:"text-sm text-gray-500",children:s.email})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"group p-4 rounded-xl bg-gray-50 hover:bg-primary-50 transition-colors border border-transparent hover:border-primary-200",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-primary-200 transition-colors",children:(0,t.jsx)(y.A,{className:"w-5 h-5 text-primary-600"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(c.E,{className:"text-xs text-gray-500 uppercase tracking-wide font-semibold mb-1",children:"Email"}),(0,t.jsx)(c.E,{className:"text-sm font-medium text-gray-900 break-words",children:s.email})]})]})}),(0,t.jsx)("div",{className:"group p-4 rounded-xl bg-gray-50 hover:bg-primary-50 transition-colors border border-transparent hover:border-primary-200",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-primary-200 transition-colors",children:(0,t.jsx)(b.A,{className:"w-5 h-5 text-primary-600"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(c.E,{className:"text-xs text-gray-500 uppercase tracking-wide font-semibold mb-1",children:"Tel\xe9fono"}),(0,t.jsx)(c.E,{className:"text-sm font-medium text-gray-900",children:s.phone})]})]})}),s.address&&(0,t.jsx)("div",{className:"group p-4 rounded-xl bg-gray-50 hover:bg-primary-50 transition-colors border border-transparent hover:border-primary-200",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-primary-200 transition-colors",children:(0,t.jsx)(j.A,{className:"w-5 h-5 text-primary-600"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(c.E,{className:"text-xs text-gray-500 uppercase tracking-wide font-semibold mb-1",children:"Direcci\xf3n"}),(0,t.jsx)(c.E,{className:"text-sm font-medium text-gray-900",children:s.address}),(s.city||s.region)&&(0,t.jsxs)(c.E,{className:"text-xs text-gray-500 mt-1",children:[s.city,s.city&&s.region&&", ",s.region]})]})]})})]})]})}),(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)(o.Z,{className:"p-6 sm:p-8 shadow-lg border-0 bg-white",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(n.D,{level:2,className:"text-2xl font-bold text-gray-900 mb-1",children:"Mis Pedidos"}),(0,t.jsx)(c.E,{className:"text-sm text-gray-600",children:0===T.length?"A\xfan no has realizado ning\xfan pedido":"".concat(T.length," pedido").concat(1!==T.length?"s":""," en total")})]})}),M?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mb-4"}),(0,t.jsx)(c.E,{className:"text-gray-600",children:"Cargando tus pedidos..."})]}):0===T.length?(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsxs)("div",{className:"relative w-32 h-32 mx-auto mb-6",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full"}),(0,t.jsx)("div",{className:"absolute inset-4 bg-white rounded-full flex items-center justify-center shadow-inner",children:(0,t.jsx)(f.A,{className:"w-12 h-12 text-gray-400"})})]}),(0,t.jsx)(n.D,{level:3,className:"text-xl font-bold text-gray-900 mb-2",children:"No tienes pedidos a\xfan"}),(0,t.jsx)(c.E,{className:"text-gray-600 mb-8 max-w-sm mx-auto",children:"Cuando realices tu primera compra, aparecer\xe1 aqu\xed para que puedas hacer seguimiento"}),(0,t.jsx)(k(),{href:"/productos",children:(0,t.jsxs)(d.$,{size:"lg",className:"bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white shadow-lg",children:[(0,t.jsx)(h.A,{className:"w-5 h-5 mr-2"}),"Explorar Productos"]})})]}):(0,t.jsx)("div",{className:"space-y-4",children:T.map(e=>{var s,r,a;return(0,t.jsx)("div",{className:"group border-2 border-gray-200 rounded-xl p-5 hover:border-primary-300 hover:shadow-lg transition-all bg-white",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[(0,t.jsx)(n.D,{level:3,className:"text-lg font-bold text-gray-900",children:e.orderNumber}),(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold ".concat({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",paid:"bg-green-100 text-green-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"}[e.status]||"bg-gray-100 text-gray-800"),children:{pending:"Pendiente",processing:"Procesando",paid:"Pagado",shipped:"Enviado",delivered:"Entregado",cancelled:"Cancelado"}[a=e.status]||a}),"approved"===e.paymentStatus&&(0,t.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-800 flex items-center gap-1",children:[(0,t.jsx)(p.A,{className:"w-3 h-3"}),"Pagado"]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,t.jsx)(v,{className:"w-4 h-4"}),(0,t.jsx)(c.E,{children:new Date(e.createdAt).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,t.jsx)(f.A,{className:"w-4 h-4"}),(0,t.jsxs)(c.E,{children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:(null==(s=e.items)?void 0:s.length)||0})," ","producto",(null==(r=e.items)?void 0:r.length)!==1?"s":""]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-3 sm:items-end",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)(c.E,{className:"text-xs text-gray-500 mb-1",children:"Total"}),(0,t.jsx)(c.E,{className:"text-2xl font-bold text-primary-600",children:I(e.total)})]}),(0,t.jsx)(k(),{href:"/ordenes/".concat(e.id),children:(0,t.jsx)(d.$,{variant:"ghost",size:"sm",className:"group-hover:bg-primary-50 group-hover:text-primary-700",children:"Ver Detalles"})})]})]})},e.id)})})]})})]})]})})})})}},6617:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(5105).A)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},7621:(e,s,r)=>{"use strict";r.d(s,{ZN:()=>i,Zx:()=>n,cN:()=>c,customersApi:()=>d});let t=r(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:3004";class a{async request(e,s,r){let t="".concat(this.baseUrl).concat(e),a=localStorage.getItem("customer_token");try{let e=await fetch(t,{...s,headers:{"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)},...r,...null==s?void 0:s.headers}});if(!e.ok){let s=await e.json().catch(()=>({message:"Error HTTP: ".concat(e.status," ").concat(e.statusText)})),r=s.message||s.error||"Error HTTP: ".concat(e.status);409===e.status?r=s.message||"Este email ya est\xe1 registrado. Por favor, inicia sesi\xf3n o usa otro email.":401===e.status?r=s.message||"Credenciales inv\xe1lidas. Verifica tu email y contrase\xf1a.":400===e.status?r=s.message||s.error||"Datos inv\xe1lidos. Por favor, verifica la informaci\xf3n ingresada.":404===e.status?r=s.message||"Recurso no encontrado.":e.status>=500&&(r="Error del servidor. Por favor, intenta m\xe1s tarde.");let t=Error(r);throw t.status=e.status,t.error=s,t}return e.json()}catch(e){if(e instanceof Error)throw e;throw Error("Error de red al conectar con el servidor")}}async get(e,s){return this.request(e,{method:"GET"},s)}async post(e,s,r){return this.request(e,{method:"POST",body:JSON.stringify(s)},r)}async patch(e,s){return this.request(e,{method:"PATCH",body:JSON.stringify(s)})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e){this.baseUrl=e}}let l=new a(t),i={getAll:()=>l.get("/products?isActive=true"),getFeatured:()=>l.get("/products/featured"),getById:e=>l.get("/products/".concat(e)),getBySlug:e=>l.get("/products/slug/".concat(e)),getByCategory:e=>l.get("/products?categoryId=".concat(e,"&isActive=true"))},n={getAll:()=>l.get("/categories"),getById:e=>l.get("/categories/".concat(e)),getBySlug:e=>l.get("/categories/slug/".concat(e))},c={create:e=>l.post("/orders",e),getMyOrders:()=>{let e=localStorage.getItem("customer_token");return l.get("/orders/my-orders",e?{Authorization:"Bearer ".concat(e)}:{})},getById:e=>l.get("/orders/".concat(e)),getShippingTypes:()=>l.get("/orders/shipping/types"),initiateWebpay:e=>l.post("/orders/".concat(e,"/webpay/init")),confirmWebpay:e=>l.post("/orders/webpay/confirm",{token:e})},d={register:e=>l.post("/customers/register",e),login:e=>l.post("/customers/login",e),getProfile:()=>{let e=localStorage.getItem("customer_token");return l.get("/customers/me",e?{Authorization:"Bearer ".concat(e)}:{})}}}},e=>{e.O(0,[134,690,441,255,358],()=>e(e.s=55)),_N_E=e.O()}]);