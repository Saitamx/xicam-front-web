(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454,621],{2405:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>N});var a=s(5155),t=s(2115),o=s(63),i=s(6900),n=s(1171),l=s(8902),c=s(7919),d=s(3405);let m=(0,s(5105).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var u=s(508),g=s(3664),p=s(9141),h=s(9708),y=s(1873),x=s(2619),f=s.n(x),b=s(7621),v=s(5536),w=s(3779);function N(){let e=(0,o.useRouter)(),r=(0,v.h)(),{login:s}=(0,w.c)(),[x,N]=(0,t.useState)(!1),[j,E]=(0,t.useState)({fullName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",city:"",region:""}),P=async a=>{if(a.preventDefault(),!j.fullName.trim())return void r.showError("Por favor, ingresa tu nombre completo");if(!j.email.trim())return void r.showError("Por favor, ingresa tu email");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.email))return void r.showError("Por favor, ingresa un email v\xe1lido");if(!j.phone.trim())return void r.showError("Por favor, ingresa tu tel\xe9fono");if(j.password!==j.confirmPassword)return void r.showError("Las contrase\xf1as no coinciden");if(j.password.length<6)return void r.showError("La contrase\xf1a debe tener al menos 6 caracteres");N(!0);try{let{customer:a,token:t}=await b.customersApi.register({fullName:j.fullName,email:j.email,phone:j.phone,password:j.password,address:j.address||void 0,city:j.city||void 0,region:j.region||void 0});s(t,a),r.showSuccess("\uD83C\uDF89 \xa1Registro exitoso! Bienvenido a Xicam"),setTimeout(()=>{e.push("/")},1500)}catch(s){console.error("Error al registrar:",s);let e="Error al registrar. Por favor, intenta nuevamente.";409===s.status?e="❌ Este email ya est\xe1 registrado. \xbfYa tienes una cuenta? Inicia sesi\xf3n o usa otro email.":400===s.status?e=s.message?"❌ ".concat(s.message):"❌ Por favor, completa todos los campos requeridos correctamente.":s.message&&(e="❌ ".concat(s.message)),r.showError(e),N(!1)}};return(0,a.jsx)(i.U,{children:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white py-12 sm:py-16",children:(0,a.jsx)("div",{className:"container mx-auto px-4 sm:px-6",children:(0,a.jsx)("div",{className:"max-w-md mx-auto",children:(0,a.jsxs)(d.Z,{className:"p-6 sm:p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(m,{className:"w-8 h-8 text-primary-600"})}),(0,a.jsx)(n.D,{level:1,className:"mb-2",children:"Crear cuenta"}),(0,a.jsx)(l.E,{className:"text-gray-600 text-sm",children:"Reg\xedstrate para una experiencia personalizada"})]}),(0,a.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 inline mr-1"}),"Nombre completo *"]}),(0,a.jsx)("input",{type:"text",id:"fullName",required:!0,value:j.fullName,onChange:e=>E({...j,fullName:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Juan P\xe9rez"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 inline mr-1"}),"Email *"]}),(0,a.jsx)("input",{type:"email",id:"email",required:!0,value:j.email,onChange:e=>E({...j,email:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"juan@example.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 inline mr-1"}),"Tel\xe9fono *"]}),(0,a.jsx)("input",{type:"tel",id:"phone",required:!0,value:j.phone,onChange:e=>E({...j,phone:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"+56912345678"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 inline mr-1"}),"Contrase\xf1a *"]}),(0,a.jsx)("input",{type:"password",id:"password",required:!0,minLength:6,value:j.password,onChange:e=>E({...j,password:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"M\xednimo 6 caracteres"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar contrase\xf1a *"}),(0,a.jsx)("input",{type:"password",id:"confirmPassword",required:!0,value:j.confirmPassword,onChange:e=>E({...j,confirmPassword:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Repite la contrase\xf1a"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(y.A,{className:"w-4 h-4 inline mr-1"}),"Direcci\xf3n"]}),(0,a.jsx)("input",{type:"text",id:"address",value:j.address,onChange:e=>E({...j,address:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Calle y n\xfamero"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ciudad"}),(0,a.jsx)("input",{type:"text",id:"city",value:j.city,onChange:e=>E({...j,city:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Santiago"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"region",className:"block text-sm font-medium text-gray-700 mb-2",children:"Regi\xf3n"}),(0,a.jsx)("input",{type:"text",id:"region",value:j.region,onChange:e=>E({...j,region:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Regi\xf3n Metropolitana"})]})]}),(0,a.jsx)(c.$,{type:"submit",className:"w-full",disabled:x,children:x?"Registrando...":"Crear cuenta"}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)(l.E,{className:"text-sm text-gray-600",children:["\xbfYa tienes una cuenta?"," ",(0,a.jsx)(f(),{href:"/login",className:"text-primary-600 hover:text-primary-700 font-semibold",children:"Inicia sesi\xf3n"})]})})]})]})})})})})}},4669:(e,r,s)=>{Promise.resolve().then(s.bind(s,2405))},7621:(e,r,s)=>{"use strict";s.d(r,{ZN:()=>i,Zx:()=>n,cN:()=>l,customersApi:()=>c});let a=s(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:3004";class t{async request(e,r,s){let a="".concat(this.baseUrl).concat(e),t=localStorage.getItem("customer_token");try{let e=await fetch(a,{...r,headers:{"Content-Type":"application/json",...t&&{Authorization:"Bearer ".concat(t)},...s,...null==r?void 0:r.headers}});if(!e.ok){let r=await e.json().catch(()=>({message:"Error HTTP: ".concat(e.status," ").concat(e.statusText)})),s=r.message||r.error||"Error HTTP: ".concat(e.status);409===e.status?s=r.message||"Este email ya est\xe1 registrado. Por favor, inicia sesi\xf3n o usa otro email.":401===e.status?s=r.message||"Credenciales inv\xe1lidas. Verifica tu email y contrase\xf1a.":400===e.status?s=r.message||r.error||"Datos inv\xe1lidos. Por favor, verifica la informaci\xf3n ingresada.":404===e.status?s=r.message||"Recurso no encontrado.":e.status>=500&&(s="Error del servidor. Por favor, intenta m\xe1s tarde.");let a=Error(s);throw a.status=e.status,a.error=r,a}return e.json()}catch(e){if(e instanceof Error)throw e;throw Error("Error de red al conectar con el servidor")}}async get(e,r){return this.request(e,{method:"GET"},r)}async post(e,r,s){return this.request(e,{method:"POST",body:JSON.stringify(r)},s)}async patch(e,r){return this.request(e,{method:"PATCH",body:JSON.stringify(r)})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e){this.baseUrl=e}}let o=new t(a),i={getAll:()=>o.get("/products?isActive=true"),getFeatured:()=>o.get("/products/featured"),getById:e=>o.get("/products/".concat(e)),getBySlug:e=>o.get("/products/slug/".concat(e)),getByCategory:e=>o.get("/products?categoryId=".concat(e,"&isActive=true"))},n={getAll:()=>o.get("/categories"),getById:e=>o.get("/categories/".concat(e)),getBySlug:e=>o.get("/categories/slug/".concat(e))},l={create:e=>o.post("/orders",e),getMyOrders:()=>{let e=localStorage.getItem("customer_token");return o.get("/orders/my-orders",e?{Authorization:"Bearer ".concat(e)}:{})},getById:e=>o.get("/orders/".concat(e)),getShippingTypes:()=>o.get("/orders/shipping/types"),initiateWebpay:e=>o.post("/orders/".concat(e,"/webpay/init")),confirmWebpay:e=>o.post("/orders/webpay/confirm",{token:e})},c={register:e=>o.post("/customers/register",e),login:e=>o.post("/customers/login",e),getProfile:()=>{let e=localStorage.getItem("customer_token");return o.get("/customers/me",e?{Authorization:"Bearer ".concat(e)}:{})}}},9708:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});let a=(0,s(5105).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}},e=>{e.O(0,[134,690,441,255,358],()=>e(e.s=4669)),_N_E=e.O()}]);