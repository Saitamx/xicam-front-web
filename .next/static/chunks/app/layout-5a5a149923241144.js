(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1016:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(5105).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1165:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>c,_:()=>l});var o=r(5155),a=r(2115),i=r(5536);let n=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,a.useState)([]),l=(0,i.h)();(0,a.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{c(JSON.parse(e))}catch(e){console.error("Error loading cart from localStorage:",e)}},[]),(0,a.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(r))},[r]);let s=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];c(r=>{let o=r.find(t=>t.product.id===e);return o&&t&&l.showSuccess('\uD83D\uDDD1️ "'.concat(o.product.name,'" eliminado del carrito'),2500),r.filter(t=>t.product.id!==e)})};return(0,o.jsx)(n.Provider,{value:{items:r,addItem:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0;c(i=>{let n=i.find(t=>t.product.id===e.id&&t.isEmbroidered===o&&t.embroideryName===a);if(n){let c=n.quantity+t;return c>e.stock?(r&&l.showWarning("⚠️ Solo hay ".concat(e.stock,' unidades disponibles de "').concat(e.name,'"')),i):(r&&l.showSuccess("✅ \xa1".concat(e.name," agregado al carrito! (").concat(c," ").concat(1===c?"unidad":"unidades",")"),4e3),i.map(t=>t.product.id===e.id&&t.isEmbroidered===o&&t.embroideryName===a?{...t,quantity:c}:t))}if(t>e.stock)return r&&l.showWarning("⚠️ Solo hay ".concat(e.stock,' unidades disponibles de "').concat(e.name,'"')),i;if(r){let r=1===t?"✅ \xa1".concat(e.name," agregado al carrito! \uD83D\uDED2"):"✅ \xa1".concat(t," unidades de ").concat(e.name," agregadas al carrito! \uD83D\uDED2");l.showSuccess(r,4e3)}return[...i,{product:e,quantity:t,isEmbroidered:o,embroideryName:a}]})},removeItem:s,updateQuantity:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0)return void s(e,r);c(o=>{let a=o.find(t=>t.product.id===e);return a&&t>a.product.stock?(r&&l.showWarning("⚠️ Solo hay ".concat(a.product.stock,' unidades disponibles de "').concat(a.product.name,'"')),o):(a&&r&&t!==a.quantity&&l.showSuccess("\uD83D\uDCE6 Cantidad actualizada: ".concat(t," ").concat(1===t?"unidad":"unidades"),2e3),o.map(r=>r.product.id===e?{...r,quantity:t}:r))})},clearCart:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];c([]),localStorage.removeItem("cart"),e&&l.showSuccess("\uD83D\uDDD1️ Carrito vaciado",2500)},getTotal:()=>r.reduce((e,t)=>{let r=t.product.price*t.quantity;return t.isEmbroidered&&t.product.canBeEmbroidered&&t.product.embroideryPrice&&(r+=t.product.embroideryPrice*t.quantity),e+r},0),getItemCount:()=>r.reduce((e,t)=>e+t.quantity,0)},children:t})}function l(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},1290:()=>{},1419:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,1290,23)),Promise.resolve().then(r.bind(r,2849)),Promise.resolve().then(r.bind(r,1165)),Promise.resolve().then(r.bind(r,3779)),Promise.resolve().then(r.bind(r,5536))},2849:(e,t,r)=>{"use strict";r.d(t,{HydrationFix:()=>o});let o=()=>null},3327:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(5105).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},3779:(e,t,r)=>{"use strict";r.d(t,{CustomerProvider:()=>n,c:()=>c});var o=r(5155),a=r(2115);let i=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[n,c]=(0,a.useState)(null),[l,s]=(0,a.useState)(!0),d=(0,a.useCallback)(async()=>{if(!localStorage.getItem("customer_token"))return void c(null);try{let{customersApi:e}=await r.e(621).then(r.bind(r,7621)),t=await e.getProfile();c(t),localStorage.setItem("customer",JSON.stringify(t))}catch(e){console.error("Error verifying auth:",e),localStorage.removeItem("customer_token"),localStorage.removeItem("customer"),c(null)}},[]);return(0,a.useEffect)(()=>{try{let e=localStorage.getItem("customer"),t=localStorage.getItem("customer_token");if(e&&t)try{let t=JSON.parse(e);c(t),d().catch(()=>{})}catch(e){console.error("Error loading customer from localStorage:",e),localStorage.removeItem("customer"),localStorage.removeItem("customer_token"),c(null)}}finally{s(!1)}},[d]),(0,o.jsx)(i.Provider,{value:{customer:n,isAuthenticated:!!n,isLoading:l,login:(e,t)=>{localStorage.setItem("customer_token",e),localStorage.setItem("customer",JSON.stringify(t)),c(t)},logout:()=>{localStorage.removeItem("customer_token"),localStorage.removeItem("customer"),c(null)},updateCustomer:e=>{localStorage.setItem("customer",JSON.stringify(e)),c(e)},checkAuth:d},children:t})}function c(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useCustomer must be used within a CustomerProvider");return e}},5105:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var o=r(2115),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(e,t)=>{let r=(0,o.forwardRef)((r,i)=>{let{color:n="currentColor",size:c=24,strokeWidth:l=2,absoluteStrokeWidth:s,className:d="",children:u,...m}=r;return(0,o.createElement)("svg",{ref:i,...a,width:c,height:c,stroke:n,strokeWidth:s?24*Number(l)/Number(c):l,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),d].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...Array.isArray(u)?u:[u]])});return r.displayName="".concat(e),r}},5229:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(5105).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5536:(e,t,r)=>{"use strict";r.d(t,{NotificationProvider:()=>g,h:()=>h});var o=r(5155),a=r(2115),i=r(7816),n=r(1016),c=r(9582),l=r(3327),s=r(5229);let d={success:{bg:"bg-green-50 border-green-200",text:"text-green-800",icon:i.A,iconColor:"text-green-600"},error:{bg:"bg-red-50 border-red-200",text:"text-red-800",icon:n.A,iconColor:"text-red-600"},warning:{bg:"bg-yellow-50 border-yellow-200",text:"text-yellow-800",icon:c.A,iconColor:"text-yellow-600"},info:{bg:"bg-blue-50 border-blue-200",text:"text-blue-800",icon:l.A,iconColor:"text-blue-600"}},u=e=>{let{message:t,type:r,onClose:i}=e,[n,c]=(0,a.useState)(!1),[l,u]=(0,a.useState)(!1),m=d[r],g=m.icon;return(0,a.useEffect)(()=>(setTimeout(()=>c(!0),10),()=>{u(!0)}),[]),(0,o.jsxs)("div",{className:"\n        pointer-events-auto\n        transform transition-all duration-500 ease-out\n        ".concat(n&&!l?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95","\n        ").concat(m.bg," border-2 ").concat(m.bg.includes("green")?"border-green-300":m.bg.includes("red")?"border-red-300":m.bg.includes("yellow")?"border-yellow-300":"border-blue-300"," rounded-xl shadow-2xl p-4 sm:p-5\n        flex items-center gap-3 sm:gap-4\n        w-full\n        backdrop-blur-sm\n        animate-slide-in-right\n      "),role:"alert",children:[(0,o.jsx)("div",{className:"flex-shrink-0 ".concat(m.iconColor," animate-bounce-subtle"),children:(0,o.jsx)(g,{className:"w-6 h-6 sm:w-7 sm:h-7"})}),(0,o.jsx)("div",{className:"flex-1 min-w-0",children:(0,o.jsx)("p",{className:"text-sm sm:text-base font-semibold ".concat(m.text," leading-relaxed"),children:t})}),(0,o.jsx)("button",{onClick:()=>{u(!0),setTimeout(()=>{i()},300)},className:"flex-shrink-0 ".concat(m.text," hover:opacity-70 transition-opacity p-1 rounded-full hover:bg-black/5"),"aria-label":"Cerrar notificaci\xf3n",children:(0,o.jsx)(s.A,{className:"w-5 h-5"})})]})},m=(0,a.createContext)(void 0);function g(e){let{children:t}=e,[r,i]=(0,a.useState)([]),n=(0,a.useCallback)(e=>{i(t=>t.filter(t=>t.id!==e))},[]),c=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,o=Math.random().toString(36).substring(7),a={id:o,message:e,type:t,duration:r};i(e=>[...e,a]),r>0&&setTimeout(()=>{n(o)},r)},[n]),l=(0,a.useCallback)((e,t)=>{c(e,"success",t)},[c]),s=(0,a.useCallback)((e,t)=>{c(e,"error",t)},[c]),d=(0,a.useCallback)((e,t)=>{c(e,"warning",t)},[c]),g=(0,a.useCallback)((e,t)=>{c(e,"info",t)},[c]);return(0,o.jsxs)(m.Provider,{value:{showToast:c,showSuccess:l,showError:s,showWarning:d,showInfo:g},children:[t,(0,o.jsx)("div",{className:"fixed top-4 left-4 right-4 sm:left-auto sm:right-4 z-[9999] flex flex-col gap-2 max-w-sm sm:max-w-md pointer-events-none mx-auto sm:mx-0",children:r.map(e=>(0,o.jsx)(u,{message:e.message,type:e.type,onClose:()=>n(e.id)},e.id))})]})}function h(){let e=(0,a.useContext)(m);if(void 0===e)throw Error("useNotification must be used within a NotificationProvider");return e}},7816:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(5105).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9582:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(5105).A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},e=>{e.O(0,[741,441,255,358],()=>e(e.s=1419)),_N_E=e.O()}]);