"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{7621:(t,e,r)=>{r.d(e,{ZN:()=>c,Zx:()=>n,cN:()=>i,customersApi:()=>g});let s=r(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:3004";class o{async request(t,e,r){let s="".concat(this.baseUrl).concat(t),o=localStorage.getItem("customer_token");try{let t=await fetch(s,{...e,headers:{"Content-Type":"application/json",...o&&{Authorization:"Bearer ".concat(o)},...r,...null==e?void 0:e.headers}});if(!t.ok){let e=await t.json().catch(()=>({message:"Error HTTP: ".concat(t.status," ").concat(t.statusText)})),r=e.message||e.error||"Error HTTP: ".concat(t.status);409===t.status?r=e.message||"Este email ya est\xe1 registrado. Por favor, inicia sesi\xf3n o usa otro email.":401===t.status?r=e.message||"Credenciales inv\xe1lidas. Verifica tu email y contrase\xf1a.":400===t.status?r=e.message||e.error||"Datos inv\xe1lidos. Por favor, verifica la informaci\xf3n ingresada.":404===t.status?r=e.message||"Recurso no encontrado.":t.status>=500&&(r="Error del servidor. Por favor, intenta m\xe1s tarde.");let s=Error(r);throw s.status=t.status,s.error=e,s}return t.json()}catch(t){if(t instanceof Error)throw t;throw Error("Error de red al conectar con el servidor")}}async get(t,e){return this.request(t,{method:"GET"},e)}async post(t,e,r){return this.request(t,{method:"POST",body:JSON.stringify(e)},r)}async patch(t,e){return this.request(t,{method:"PATCH",body:JSON.stringify(e)})}async delete(t){return this.request(t,{method:"DELETE"})}constructor(t){this.baseUrl=t}}let a=new o(s),c={getAll:()=>a.get("/products?isActive=true"),getFeatured:()=>a.get("/products/featured"),getById:t=>a.get("/products/".concat(t)),getBySlug:t=>a.get("/products/slug/".concat(t)),getByCategory:t=>a.get("/products?categoryId=".concat(t,"&isActive=true"))},n={getAll:()=>a.get("/categories"),getById:t=>a.get("/categories/".concat(t)),getBySlug:t=>a.get("/categories/slug/".concat(t))},i={create:t=>a.post("/orders",t),getMyOrders:()=>{let t=localStorage.getItem("customer_token");return a.get("/orders/my-orders",t?{Authorization:"Bearer ".concat(t)}:{})},getById:t=>a.get("/orders/".concat(t)),getShippingTypes:()=>a.get("/orders/shipping/types"),initiateWebpay:t=>a.post("/orders/".concat(t,"/webpay/init")),confirmWebpay:t=>a.post("/orders/webpay/confirm",{token:t})},g={register:t=>a.post("/customers/register",t),login:t=>a.post("/customers/login",t),getProfile:()=>{let t=localStorage.getItem("customer_token");return a.get("/customers/me",t?{Authorization:"Bearer ".concat(t)}:{})}}}}]);